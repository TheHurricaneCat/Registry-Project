<ProdMod>
    text: "ENTER THE PRODUCTS"
    #auto adjust text
    text_size: self.width, None
    padding: 20
    height: self.texture_size[1]
    halign: "center"
    markup: True
    color: 1, 1, 1, 1
    size_hint_y: None
    height: 70
    background_color: 0, 0, 0, 0
    canvas.before:
        Color:
            rgba: self.background_color
        Rectangle:
            size: self.size
            pos: self.pos

<ProdScroll>
    padding: 5, 5
    background_color: 0, 0, 0, 0
    canvas.before:
        Color:
            rgba: self.background_color
        Rectangle:
            size: self.size
            pos: self.pos     
    ScrollView:
        do_scroll_y: True
        do_scroll_x: False    
        GridLayout:
            cols: 1
            size_hint: (1, None)
            height: self.minimum_height
            pos: self.pos
            id: prodContainer

<ProdSelection>
    height: 80  
    padding: 1, 1
    background_color: 0, 0, 0, 1
    canvas.before:
        Color:
            rgba: self.background_color
        Rectangle:
            size: self.size
            pos: self.pos
    size_hint_y: None
    Label:
        id: label1
        text: ""
        size_hint_x: 0.05
        #Auto adjust
        background_color: 0, 0, 0, 1 #198/255, 92/255, 63/255, 1
        canvas.before:
            Color:
                rgba: self.background_color
            Rectangle:
                size: self.size
                pos: self.pos
    Image:
        id: prodImage
        source: 'RegistryImages/1.png'
        allow_stretch: True
        keep_ratio: False
        size_hint: 0.4, 1
        size: self.texture_size
    ProdCustomButton: 
        id: button1
        varcont: "0"
        text: "ADD"
        text_size: self.width, None
        height: self.texture_size[1]
        halign: "center"
        markup: True
        padding: 10
        on_press: root.onProdPress()
        

<ProdCustomButton@Button>
    background_color: (43/255, 50/255, 58/255, 1) if self.state == "normal" else (0, 0, 1, 1)
    background_normal: ''
    canvas.before:
        Color:
            rgba: self.background_color
        RoundedRectangle:
            size: self.size
            pos: self.pos
            radius: [0,5,5,0]

<KeyMod>
    text: "ENTER THE QUANTITY"
    size_hint_y: None
    text_size: self.width, None
    padding: 20
    height: self.texture_size[1]
    halign: "center"
    markup: True
    height: 70
    background_color: 0, 0, 0, 0
    canvas.before:
        Color:
            rgba: self.background_color
        Rectangle:
            size: self.size
            pos: self.pos

<KeyContainer>
    GridLayout:
        id: keyContainer
        spacing: 1
        padding: 1
        cols: 3

<KeyPad>
    KeyCustomButton:
        id: button2
        background_color: 1, 0, 0, 1
        text: "-"
        on_press: root.onKeyPress()

<KeyCustomButton@Button>
    background_normal: ''
    canvas.before:
        Color:
            rgba: self.background_color
        RoundedRectangle:
            size: self.size
            pos: self.pos
            radius: [5,5,5,5]

<ViewContainer>
    BoxLayout:
        id: viewContainer
        orientation: "vertical"

<ViewMod>
    size_hint_y: None
    height: 70
    spacing: 5
    Label:
        id: viewTitle
        text: "CURRENT PRODUCTS"
        text_size: self.width, None
        padding: 20
        height: self.texture_size[1]
        halign: "center"
        markup: True
        size_hint_y: None
        height: 70
        background_color: 0, 0, 0, 1
        canvas.before:
            Color:
                rgba: self.background_color
            Rectangle:
                size: self.size
                pos: self.pos
    BoxLayout:
        orientation: "vertical"
        Label:
            text: "TOTAL PRICE"
            text_size: self.width, None
            padding: 20
            height: self.texture_size[1]
            halign: "center"
            markup: True
            size_hint_y: 0.5
            height: 70
            background_color: 39/255, 41/255, 54/255, 1
            canvas.before:
                Color:
                    rgba: self.background_color
                Rectangle:
                    size: self.size
                    pos: self.pos
        Label:
            id: viewTotalDisplay
            text: "0.00"
            text_size: self.width, None
            padding: 20
            height: self.texture_size[1]
            halign: "center"
            markup: True
            size_hint_y: 0.5
            height: 70
            background_color: 0, 0, 0, 1
            canvas.before:
                Color:
                    rgba: self.background_color
                Rectangle:
                    size: self.size
                    pos: self.pos
        
<ViewPad>
    orientation: "vertical"
    spacing: 5
    padding: 10
    background_color: 43/255, 50/255, 58/255, 1,
    canvas.before:
        Color:
            rgba: self.background_color
        Rectangle:
            pos: self.pos
            size: self.size
    ViewClearButton:
        id: button3
        text: "CLEAR"
        on_press: root.onClearPress()
    ViewEnterButton:
        id: button4
        text: "ENTER"
        on_press: root.onEnterPress()

<ViewClearButton@Button>
    background_normal: ''
    background_color: 198/255, 92/255, 63/255, 1 #Light Red
    canvas.before:
        Color:
            rgba: self.background_color
        Rectangle:
            size: self.size
            pos: self.pos

<ViewEnterButton@Button>
    background_normal: ''
    background_color: 111/255, 159/255, 91/255, 1 #Light green
    canvas.before:
        Color:
            rgba: self.background_color
        Rectangle:
            size: self.size
            pos: self.pos

<ViewScroll>
    background_color: 43/255, 50/255, 58/255, 1
    canvas.before:
        Color:
            rgba: self.background_color
        Rectangle:
            size: self.size
            pos: self.pos
    ScrollView:
        do_scroll_y: True
        do_scroll_x: False    
        GridLayout:
            cols: 1
            size_hint: (1, None)
            height: self.minimum_height
            pos: self.pos
            id: viewScrollContainer

<ViewSelection>
    size_hint_y: None
    padding: 2, 2
    height: 120
    GridLayout:
        cols: 5
        index: 0
        id: viewGrid     
        background_color: 154/255, 157/255, 157/255, 1 #34/255, 43/255, 53/255, 1
        spacing: 5
        canvas.before:
            Color:
                rgba: self.background_color
            Rectangle:
                pos: self.pos
                size: self.size
        Label:
            id: viewIndc
            text: ""
            size_hint_x: 0.1
            background_color: 0, 0, 0, 1 #198/255, 92/255, 63/255, 1
            canvas.before:
                Color:
                    rgba: self.background_color
                Rectangle:
                    size: self.size
                    pos: self.pos
        BoxLayout:
            orientation: "vertical"
            size_hint_x: 0.5
            padding: 2, 2
            Image:
                id: viewImage
                source: 'RegistryImages/1.png'
                allow_stretch: True
                keep_ratio: True
                size_hint: 1, 1
                size: self.texture_size
        BoxLayout: 
            orientation: "vertical"
            size_hint_x: 2
            spacing: 5
            padding: 1, 2
            Label: 
                id: viewTitle
                text: "LONG LONG PRODUCT TITLE"
                #size_hint_y: None
                text_size: self.width, None
                height: self.texture_size[1]
                halign: "center"
                markup: True
                background_color: 28/255, 28/255, 28/255, 1
                canvas.before:
                    Color:
                        rgba: self.background_color
                    Rectangle:
                        pos: self.pos
                        size: self.size
            BoxLayout:
                orientation: "horizontal"
                spacing: 2
                Label: 
                    id: viewQuantity
                    halign: 'left'
                    text: "Quantity"
                    markup: True
                    size_hint_x: 0.8
                    background_color: 28/255, 28/255, 28/255, 1
                    color: 1, 1, 1, 1
                    canvas.before:
                        Color:
                            rgba: self.background_color
                        Rectangle:
                            pos: self.pos
                            size: self.size
                Label: 
                    id: viewPrice
                    halign: 'left'
                    text: "Price"
                    markup: True
                    background_color: 28/255, 28/255, 28/255, 1
                    color: 1, 1, 1, 1
                    canvas.before:
                        Color:
                            rgba: self.background_color
                        Rectangle:
                            pos: self.pos
                            size: self.size
        BoxLayout:
            orientation: "vertical"
            padding: 5, 5
            spacing: 5
            Label:
                text: "Quantity Price"
                markup: True
                background_color: 111/255, 159/255, 91/255, 1
                canvas.before:
                    Color:
                        rgba: self.background_color
                    Rectangle:
                        size: self.size
                        pos: self.pos
            Label:
                id: viewTotalPrice
                text: "Price"
                markup: True
                background_color: 111/255, 159/255, 91/255, 0.5
                canvas.before:
                    Color:
                        rgba: self.background_color
                    Rectangle:
                        size: self.size
                        pos: self.pos
        BoxLayout:
            padding: 5, 5
            orientation: "vertical"
            ViewCustomButton:
                text: "Remove"
                on_press: root.removeItem()

<ViewCustomButton@Button>
    background_normal: ''
    background_color: 198/255, 92/255, 63/255, 1 #Light Red
    canvas.before:
        Color:
            rgba: self.background_color
        RoundedRectangle:
            size: self.size
            pos: self.pos
            radius: [5,5,5,5]

#: import Factory kivy.factory.Factory
# Popup for google drive #

<UploadConfirmation@Popup>
    autodismiss: False
    title_align: "center"
    size_hint: 0.4, 0.2
    title: "Upload current load to google drive?"
    first_popup: None
    GridLayout:
        cols: 2
        Button:
            text: "Cancel"
            on_press: root.dismiss()
        Button:
            text: "Confirm"
            on_press: root.uploadConfirm()
# ... # 


<ViewConfirmation@Popup>
    autodismiss: False
    title_align: "center"
    size_hint: 0.4, 0.2
    title: "Record this entry?"
    first_popup: None
    GridLayout:
        cols: 2
        Button:
            text: "Cancel"
            on_press: root.dismiss()
        Button:
            text: "Confirm"
            on_press: root.processConfirm()

<StaffConfirmation@Popup>
    size_hint: 0.5, 0.8
    title_align: "center"
    id: staffTitle
    title: "Staff Select"
    BoxLayout:    
        orientation: "vertical"
        Label:
            size_hint_y: 0.2
            text: "Current Staff"
            id: currentStaff
        ScrollView:
            do_scroll_y: True
            do_scroll_x: False
            GridLayout:
                cols: 1
                size_hint: (1.0, None)
                height: self.minimum_height
                pos: self.pos
                id: staffContainer
        Label: 
            size_hint_y: 0.2
            text: "ADD STAFF"
        TextInput:
            id: textInput
            size_hint_y: 0.2
            on_focus: root.clearField()
        Button:
            size_hint_y: 0.4
            text: "Confirm"
            on_press: root.confirmStaff()
        Button:
            size_hint_y: 0.4
            text: "Cancel"
            on_press: root.dismiss()

<StaffError@Popup>
    autodismiss: False
    title_align: "center"
    size_hint: 0.3, 0.2
    title: "-"
    Button:
        text: "Confirm"
        on_release: root.dismiss()

<StaffConfirm@Popup>
    autodismiss: False
    title_align: "center"
    size_hint: 0.4, 0.2
    title: "Confirmation"
    first_popup: None
    GridLayout:
        cols: 2
        Button:
            text: "Cancel"
            on_press: root.dismiss()
        Button:
            text: "Confirm"
            on_press: root.setStaff()

<StaffPad>
    orientation: "vertical"
    Button:
        text: "DESELECT"
        on_press: root.selectStaff()
    Button:
        text: "ADD"
        on_press: root.confirmStaff()
    TextInput:
        id: textInput

<StaffSelection>
    size_hint_y: None
    height: 70
    BoxLayout:
        background_color: 0, 0, 0, 0
        canvas.before:
            Color:
                rgba: self.background_color
            Rectangle:
                pos: self.pos
                size: self.size
        Label: 
            id: staffTitle
            text: "-"
            text_size: self.width, None
            height: self.texture_size[1]
            markup: True
            halign: "center"
            valignL: "middle"
        Button:
            text: "Select"
            on_press: 
                root.updateStaff()
        

<MainGrid>
    BoxLayout:
        id: bgGrid
        padding: 20, 15
        background_color: 0,0,0,1
        canvas.before:
            Color:
                rgba: self.background_color
            Rectangle:
                pos: self.pos
                size: self.size
        
        orientation: "vertical"
        size: root.width, root.height
        spacing: 10
        GridLayout:
            cols: 2
            size_hint: 1, 0.2
            Button: 
                id: staffTitle
                background_color: 154/255, 157/255, 157/255, 1
                halign: "left"
                text: "Current Staff: None"
                on_press: root.activatePopup()
            Button: 
                background_color: 0/255, 255/255, 255/255, 1
                halign: "left"
                text: "Upload Recorded Data to Google Drive"
                on_press: root.pushExcel()
        GridLayout:
            cols: 3
            spacing: 10
            BoxLayout:
                padding: 10, 10
                canvas.before:
                    Color:
                        rgba: 154/255, 157/255, 157/255, 1
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [5,5,5,5]

                orientation: "vertical"
                id: prodGrid           

            BoxLayout:
                padding: 10, 10
                canvas.before:
                    Color:
                        rgba: 154/255, 157/255, 157/255, 1
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [5,5,5,5]
                spacing: 10 
                orientation: "vertical"
                id: keyGrid
                
            BoxLayout:
                padding: 10, 10
                canvas.before:
                    Color:
                        rgba: 154/255, 157/255, 157/255, 1
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [5,5,5,5]
                spacing: 10 
                orientation: "vertical"
                size_hint_x: 2
                id: viewGrid